<% content_for :javascript_includes do %>
  <%= javascript_include_tag 'jquery.raty.js','letsrate.js'%>
<% end %> 
<div class="container">
    <h1><%= @user.first_name %></h1>

    <div class="row">
        <h2>Minhas metodologias</h2>
        <div class="col-lg-12">
            <div class="methodology">
                <% if @user.methodologies.empty? %>
                    Não há metodologias cadastradas
                <% else %>
                    <% @user.methodologies.each do |methodology| %>
                        <h3><%= link_to "#{methodology.title}", methodology_path(methodology) %></h3>
                        <p><%= rating_for methodology, "qualidade", star: 5 %></p>
                        <p>
                          <%= methodology.content.html_safe %>
                        </p>
                    <% end %>
                <% end %>
            </div>
            <div class="friends">
                <h2>Meus amigos</h2>
                <% @user.friendships.each do |friendship| %>
                  <p>
                    <% if friendship.invited && !friendship.accepted %>
                       <%= friendship.friend.first_name %> adicionou você como amigo, deseja aceitar? - 
                       <%= link_to "Aceitar", friendship_accept_path(friendship, friend_id: friendship.friend.id), class: "btn btn-primary" %>
                    <% elsif friendship.accepted %>
                      <%= link_to "#{friendship.friend.first_name}", profile_path(friendship.friend) %> - 
                      <%= link_to "Remover amigo", friendship, method: :delete, confirm: "Tem certeza que deseja remover amigo?" %>
                    <% end %>
                  </p>
                <% end %>

                <% unless @user == current_user %>
                  <p><%= link_to "Adicionar amigo", friendships_path(friend_id: @user), class: "btn btn-primary", method: :post if current_user.friendships.where(friend_id: @user).blank? %></p>
                <% end %>
            </div>
        </div>
    </div>
</div>